# OpenTherm Gateway - System & Time Dashboard
# System configuration, time synchronization, and WiFi monitoring

type: vertical-stack
cards:
  # Time & Date Card
  - type: entities
    title: Boiler Time & Date
    show_header_toggle: false
    entities:
      - entity: sensor.opentherm_gw_day_of_week
        name: Day of Week
        icon: mdi:calendar-week
      - entity: sensor.opentherm_gw_time_of_day
        name: Time
        icon: mdi:clock-outline
      - entity: sensor.opentherm_gw_date
        name: Date
        icon: mdi:calendar-today
      - entity: sensor.opentherm_gw_year
        name: Year
        icon: mdi:calendar
      - type: divider
      - entity: button.opentherm_gw_sync_time
        name: Sync Time from Home Assistant
        icon: mdi:clock-sync

  # Temperature Bounds Card
  - type: entities
    title: Temperature Limits
    show_header_toggle: false
    entities:
      - type: section
        label: Central Heating Bounds
      - entity: sensor.opentherm_gw_ch_setpoint_min
        name: Min CH Setpoint
        icon: mdi:thermometer-low
      - entity: sensor.opentherm_gw_ch_setpoint_max
        name: Max CH Setpoint
        icon: mdi:thermometer-high
      - entity: number.opentherm_gw_max_ch_setpoint
        name: Current Max CH Setpoint
        icon: mdi:thermometer-lines
      - type: section
        label: Hot Water Bounds
      - entity: sensor.opentherm_gw_dhw_setpoint_min
        name: Min DHW Setpoint
        icon: mdi:thermometer-low
      - entity: sensor.opentherm_gw_dhw_setpoint_max
        name: Max DHW Setpoint
        icon: mdi:thermometer-high
      - entity: number.opentherm_gw_dhw_setpoint
        name: Current DHW Setpoint
        icon: mdi:water-thermometer-outline

  # Gateway Configuration Card
  - type: entities
    title: Gateway Configuration
    show_header_toggle: false
    entities:
      - entity: text.opentherm_gw_device_name
        name: Device Name
        icon: mdi:tag-text
      - entity: text.opentherm_gw_device_id
        name: Device ID
        icon: mdi:identifier
      - entity: number.opentherm_gw_update_interval
        name: Update Interval
        icon: mdi:timer-cog
      - type: divider
      - entity: number.opentherm_gw_opentherm_tx_pin
        name: TX Pin (GPIO)
        icon: mdi:pin
      - entity: number.opentherm_gw_opentherm_rx_pin
        name: RX Pin (GPIO)
        icon: mdi:pin

  # WiFi Status Card
  - type: entities
    title: WiFi Connection
    show_header_toggle: false
    entities:
      - entity: sensor.opentherm_gw_wifi_link_status
        name: Connection Status
        icon: mdi:wifi-check
      - entity: sensor.opentherm_gw_wifi_rssi
        name: Signal Strength
        icon: mdi:wifi
      - entity: sensor.opentherm_gw_wifi_ssid
        name: Network Name
        icon: mdi:wifi-marker
      - entity: sensor.opentherm_gw_ip_address
        name: IP Address
        icon: mdi:ip-network

  # System Health Card
  - type: entities
    title: System Health
    show_header_toggle: false
    entities:
      - entity: sensor.opentherm_gw_uptime
        name: Gateway Uptime
        icon: mdi:clock-start
      - entity: sensor.opentherm_gw_free_heap
        name: Free Memory
        icon: mdi:memory
      - entity: sensor.opentherm_gw_opentherm_version
        name: OpenTherm Protocol Version
        icon: mdi:information
      - type: divider
      - type: section
        label: MQTT Reliability
      - entity: sensor.opentherm_gw_mqtt_publish_attempts
        name: Total Publish Attempts
        icon: mdi:counter
      - entity: sensor.opentherm_gw_mqtt_publish_failures
        name: Total Publish Failures
        icon: mdi:alert-circle
      - entity: sensor.opentherm_gw_mqtt_reconnect_count
        name: MQTT Reconnections
        icon: mdi:wifi
      - type: divider
      - entity: button.opentherm_gw_restart
        name: Restart Gateway
        icon: mdi:restart
        tap_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.opentherm_gw_restart
          confirmation:
            text: Are you sure you want to restart the gateway?

  # Diagnostic Codes Card
  - type: entities
    title: Diagnostic Information
    show_header_toggle: false
    entities:
      - entity: binary_sensor.opentherm_gw_fault
        name: Fault Status
        icon: mdi:alert-circle
      - entity: sensor.opentherm_gw_fault_code
        name: Fault Code
        icon: mdi:alert-octagon
      - entity: sensor.opentherm_gw_diagnostic_code
        name: Diagnostic Code
        icon: mdi:alert-circle
      - entity: binary_sensor.opentherm_gw_diagnostic
        name: Diagnostic Mode
        icon: mdi:wrench
